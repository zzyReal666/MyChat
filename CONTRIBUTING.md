# è´¡çŒ®æŒ‡å— (Contributing Guide)

## ğŸš€ Gitå¼€å‘æµç¨‹

### åˆ†æ”¯ç­–ç•¥

æˆ‘ä»¬ä½¿ç”¨ **Git Flow** å·¥ä½œæµï¼š

- `main` - ç”Ÿäº§ç¯å¢ƒåˆ†æ”¯ï¼Œåªæ¥å—ç»è¿‡æµ‹è¯•çš„ç¨³å®šä»£ç 
- `develop` - å¼€å‘ç¯å¢ƒåˆ†æ”¯ï¼Œé›†æˆæ‰€æœ‰åŠŸèƒ½å¼€å‘
- `feature/*` - åŠŸèƒ½åˆ†æ”¯ï¼Œç”¨äºå¼€å‘æ–°åŠŸèƒ½
- `hotfix/*` - çƒ­ä¿®å¤åˆ†æ”¯ï¼Œç”¨äºç´§æ€¥ä¿®å¤ç”Ÿäº§é—®é¢˜
- `release/*` - å‘å¸ƒåˆ†æ”¯ï¼Œç”¨äºå‡†å¤‡æ–°ç‰ˆæœ¬å‘å¸ƒ

### æ ‡å‡†å¼€å‘æµç¨‹

#### 1. å¼€å§‹æ–°åŠŸèƒ½å¼€å‘

```bash
# ç¡®ä¿åœ¨developåˆ†æ”¯ä¸Š
git checkout develop
git pull origin develop

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# å¼€å§‹å¼€å‘...
```

#### 2. å¼€å‘è¿‡ç¨‹ä¸­çš„æäº¤

```bash
# æ·»åŠ æ›´æ”¹
git add .

# æäº¤æ›´æ”¹ï¼ˆä½¿ç”¨è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼‰
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"
git commit -m "fix: ä¿®å¤ç™»å½•éªŒè¯bug"
git commit -m "docs: æ›´æ–°APIæ–‡æ¡£"
git commit -m "style: æ ¼å¼åŒ–ä»£ç "
git commit -m "refactor: é‡æ„ç”¨æˆ·æœåŠ¡"
git commit -m "test: æ·»åŠ ç”¨æˆ·ç™»å½•æµ‹è¯•"
```

#### 3. æ¨é€åŠŸèƒ½åˆ†æ”¯

```bash
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin feature/your-feature-name
```

#### 4. åˆ›å»ºPull Request

- åœ¨GitHubä¸Šåˆ›å»ºPRï¼Œä» `feature/your-feature-name` åˆ° `develop`
- å¡«å†™PRæè¿°ï¼Œè¯´æ˜åŠŸèƒ½å˜æ›´
- ç­‰å¾…ä»£ç å®¡æŸ¥
- é€šè¿‡CI/CDæ£€æŸ¥

#### 5. åˆå¹¶å’Œæ¸…ç†

- å®¡æŸ¥é€šè¿‡ååˆå¹¶åˆ°developåˆ†æ”¯
- åˆ é™¤åŠŸèƒ½åˆ†æ”¯
- å®šæœŸå°†developåˆå¹¶åˆ°mainè¿›è¡Œå‘å¸ƒ

### åˆ†æ”¯åŒæ­¥ç­–ç•¥

#### ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥ï¼Ÿ

- **ä¿æŒä»£ç ä¸€è‡´æ€§**ï¼šç¡®ä¿developå’Œmainåˆ†æ”¯çš„ä»£ç çŠ¶æ€ä¸€è‡´
- **é¿å…å†²çª**ï¼šå‡å°‘åˆå¹¶æ—¶çš„å†²çª
- **ç‰ˆæœ¬ç®¡ç†**ï¼šä¾¿äºç‰ˆæœ¬å‘å¸ƒå’Œå›æ»š
- **å›¢é˜Ÿåä½œ**ï¼šç¡®ä¿æ‰€æœ‰å¼€å‘è€…ä½¿ç”¨ç›¸åŒçš„ä»£ç åŸºç¡€

#### åŒæ­¥æ—¶æœºå’Œæ–¹å‘

```
å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼š
develop â†’ main (é€šè¿‡releaseåˆ†æ”¯æˆ–ç›´æ¥åˆå¹¶)

çƒ­ä¿®å¤åï¼š
main â†’ develop (å°†ä¿®å¤åŒæ­¥å›å¼€å‘åˆ†æ”¯)

å®šæœŸæ£€æŸ¥ï¼š
ç›‘æ§åˆ†æ”¯å·®å¼‚ï¼ŒåŠæ—¶åŒæ­¥
```

#### ä½¿ç”¨åŒæ­¥è„šæœ¬

æˆ‘ä»¬æä¾›äº†è‡ªåŠ¨åŒ–è„šæœ¬æ¥ç®¡ç†åˆ†æ”¯åŒæ­¥ï¼š

```bash
# æ£€æŸ¥åˆ†æ”¯çŠ¶æ€
./scripts/sync-branches.sh status

# å‘å¸ƒæ–°ç‰ˆæœ¬ï¼ˆdevelop â†’ mainï¼‰
./scripts/sync-branches.sh release

# çƒ­ä¿®å¤ååŒæ­¥ï¼ˆmain â†’ developï¼‰
./scripts/sync-branches.sh sync-main

# å®šæœŸåŒæ­¥æ£€æŸ¥
./scripts/sync-branches.sh periodic

# åˆ›å»ºå‘å¸ƒæ ‡ç­¾
./scripts/sync-branches.sh tag v1.0.0
```

#### åŒæ­¥æœ€ä½³å®è·µ

1. **å®šæœŸåŒæ­¥**ï¼š
   - æ¯å‘¨è‡³å°‘æ£€æŸ¥ä¸€æ¬¡åˆ†æ”¯çŠ¶æ€
   - å½“developé¢†å…ˆmainè¶…è¿‡50ä¸ªæäº¤æ—¶ï¼Œè€ƒè™‘å‘å¸ƒæ–°ç‰ˆæœ¬

2. **å‘å¸ƒæµç¨‹**ï¼š
   ```bash
   # 1. æ£€æŸ¥developåˆ†æ”¯çŠ¶æ€
   ./scripts/sync-branches.sh status
   
   # 2. å‘å¸ƒæ–°ç‰ˆæœ¬
   ./scripts/sync-branches.sh release
   
   # 3. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
   ./scripts/sync-branches.sh tag v1.0.0
   ```

3. **çƒ­ä¿®å¤æµç¨‹**ï¼š
   ```bash
   # 1. ä»mainåˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
   ./scripts/dev-workflow.sh start-hotfix critical-fix
   
   # 2. ä¿®å¤é—®é¢˜å¹¶æäº¤
   ./scripts/dev-workflow.sh commit fix "ä¿®å¤å…³é”®é—®é¢˜"
   
   # 3. å®Œæˆçƒ­ä¿®å¤
   ./scripts/dev-workflow.sh finish-hotfix
   
   # 4. åˆ›å»ºPRåˆ°mainåˆ†æ”¯
   # 5. åˆå¹¶ååŒæ­¥åˆ°develop
   ./scripts/sync-branches.sh sync-main
   ```

4. **è‡ªåŠ¨åŒ–æ£€æŸ¥**ï¼š
   - å¯ä»¥è®¾ç½®GitHub Actionså®šæœŸè¿è¡ŒåŒæ­¥æ£€æŸ¥
   - å½“æ£€æµ‹åˆ°åˆ†æ”¯å·®å¼‚è¿‡å¤§æ—¶è‡ªåŠ¨é€šçŸ¥

#### åˆ†æ”¯ä¿æŠ¤è§„åˆ™

å»ºè®®åœ¨GitHubä¸Šè®¾ç½®ä»¥ä¸‹åˆ†æ”¯ä¿æŠ¤è§„åˆ™ï¼š

**Mainåˆ†æ”¯ä¿æŠ¤**ï¼š
- è¦æ±‚Pull Requestå®¡æŸ¥
- è¦æ±‚çŠ¶æ€æ£€æŸ¥é€šè¿‡
- ç¦æ­¢ç›´æ¥æ¨é€
- è¦æ±‚çº¿æ€§å†å²

**Developåˆ†æ”¯ä¿æŠ¤**ï¼š
- è¦æ±‚Pull Requestå®¡æŸ¥
- è¦æ±‚çŠ¶æ€æ£€æŸ¥é€šè¿‡
- å…è®¸ç®¡ç†å‘˜ç›´æ¥æ¨é€

### æäº¤ä¿¡æ¯è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat:` - æ–°åŠŸèƒ½
- `fix:` - ä¿®å¤bug
- `docs:` - æ–‡æ¡£æ›´æ–°
- `style:` - ä»£ç æ ¼å¼è°ƒæ•´
- `refactor:` - ä»£ç é‡æ„
- `test:` - æµ‹è¯•ç›¸å…³
- `chore:` - æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

### ç´§æ€¥ä¿®å¤æµç¨‹

```bash
# ä»mainåˆ†æ”¯åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
git checkout main
git checkout -b hotfix/critical-bug-fix

# ä¿®å¤é—®é¢˜
git add .
git commit -m "fix: ä¿®å¤å…³é”®å®‰å…¨æ¼æ´"

# æ¨é€åˆ°è¿œç¨‹
git push origin hotfix/critical-bug-fix

# åˆ›å»ºPRåˆ°mainå’Œdevelop
```

### é‡è¦æé†’

âš ï¸ **æ°¸è¿œä¸è¦ç›´æ¥åœ¨mainåˆ†æ”¯ä¸Šå¼€å‘ï¼**

- mainåˆ†æ”¯åº”è¯¥å§‹ç»ˆä¿æŒç¨³å®š
- æ‰€æœ‰å¼€å‘å·¥ä½œéƒ½åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šè¿›è¡Œ
- é€šè¿‡Pull Requestè¿›è¡Œä»£ç å®¡æŸ¥
- ç¡®ä¿CI/CDæ£€æŸ¥é€šè¿‡åå†åˆå¹¶

æ¬¢è¿ä¸º MyChat é¡¹ç›®åšå‡ºè´¡çŒ®ï¼æœ¬æ–‡æ¡£å°†æŒ‡å¯¼æ‚¨å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘ã€‚

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### 1 Fork é¡¹ç›®
1. è®¿é—®MyChat GitHub ä»“åº“](https://github.com/zzyReal666/MyChat)2. ç‚¹å‡»å³ä¸Šè§’çš„Fork æŒ‰é’®
3å…‹éš†æ‚¨çš„ Fork åˆ°æœ¬åœ°ï¼š
```bash
git clone https://github.com/YOUR_USERNAME/MyChat.git
cd MyChat
```

### 2åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
```bash
git checkout -b feature/your-feature-name
# æˆ–
git checkout -b fix/your-bug-fix
```

### 3. å¼€å‘ä¸æµ‹è¯•
```bash
# å®‰è£…ä¾èµ–
make install

# è¿è¡Œå¿«é€Ÿæ£€æŸ¥
./scripts/quick-check.sh

# å¼€å‘å®Œæˆåè¿è¡Œå®Œæ•´æ£€æŸ¥
./scripts/pre-commit-check.sh
```

### 4. æäº¤ä»£ç 
```bash
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°"
git push origin feature/your-feature-name
```

### 5. åˆ›å»º Pull Request
1. è®¿é—®æ‚¨çš„ GitHub Fork é¡µé¢
2. ç‚¹å‡» "Compare & pull request"3. å¡«å†™ PR æè¿°ï¼Œä½¿ç”¨æä¾›çš„æ¨¡æ¿

---

## ğŸ” ä»£ç æäº¤å‰æ£€æŸ¥æ¸…å•

### âœ… å¿…æ£€é¡¹ç›®ï¼ˆæäº¤å‰å¿…é¡»é€šè¿‡ï¼‰
- [ ] ä»£ç æ ¼å¼åŒ–æ£€æŸ¥ (`black --check backend/`)
-  ] ä»£ç é£æ ¼æ£€æŸ¥ (`flake8-format=default --statistics backend/`)
-  å¯¼å…¥æ’åºæ£€æŸ¥ (`isort --check-only backend/`)
-  çŠ¶æ€æ£€æŸ¥ (`git status`)
- [ ] åŸºç¡€æµ‹è¯•è¿è¡Œ (`pytest tests/`)

### âš ï¸ æ¨èæ£€æŸ¥é¡¹ç›®
- æ£€æŸ¥ (`mypy --ignore-missing-imports backend/`)
- ] å®‰å…¨æ‰«æ (`bandit -r backend/`)
- [ ] å‰ç«¯ä»£ç æ£€æŸ¥ (`npm run lint`)
- [ ] æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥

### ğŸ” æ·±åº¦æ£€æŸ¥é¡¹ç›®
- æ€§èƒ½æµ‹è¯•
- [ ] ä¾èµ–å®‰å…¨æ£€æŸ¥ (`safety check`)
- ] æ•æ„Ÿä¿¡æ¯æ£€æŸ¥

---

## ğŸš€ è‡ªåŠ¨åŒ–æ£€æŸ¥

### å¿«é€Ÿæ£€æŸ¥ï¼ˆæ—¥å¸¸å¼€å‘ï¼‰
```bash
./scripts/quick-check.sh
```

### å®Œæ•´æ£€æŸ¥ï¼ˆé‡è¦æäº¤ï¼‰
```bash
./scripts/pre-commit-check.sh
```

### ä½¿ç”¨ Makefile
```bash
# å®‰è£…ä¾èµ–
make install

# ä»£ç è´¨é‡æ£€æŸ¥
make lint

# è¿è¡Œæµ‹è¯•
make test

# ä»£ç æ ¼å¼åŒ–
make format

# å®‰å…¨æ£€æŸ¥
make security
```

---

## ğŸ“ ä»£ç è§„èŒƒ

### Python ä»£ç è§„èŒƒ
- ä½¿ç”¨ **Black** è¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä½¿ç”¨ **Flake8** è¿›è¡Œä»£ç é£æ ¼æ£€æŸ¥
- ä½¿ç”¨ **Isort** è¿›è¡Œå¯¼å…¥æ’åº
- ä½¿ç”¨ **MyPy** è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ˆæ¨èï¼‰

### å‰ç«¯ä»£ç è§„èŒƒ
- ä½¿ç”¨ **ESLint** è¿›è¡Œä»£ç æ£€æŸ¥
- ä½¿ç”¨ **Prettier** è¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼ˆæ¨èï¼‰

### Git æäº¤è§„èŒƒ
```bash
# åŠŸèƒ½å¼€å‘
git commit -m feat: æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½"

# é—®é¢˜ä¿®å¤
git commit -m fix: ä¿®å¤ç™»å½•éªŒè¯bug"

# æ–‡æ¡£æ›´æ–°
git commit -m docs: æ›´æ–°APIæ–‡æ¡£"

# ä»£ç é‡æ„
git commit -mrefactor: é‡æ„ç”¨æˆ·æœåŠ¡æ¨¡å—"

# æµ‹è¯•ç›¸å…³
git commit -mtest: æ·»åŠ ç”¨æˆ·è®¤è¯æµ‹è¯•ç”¨ä¾‹
```

### åˆ†æ”¯å‘½åè§„èŒƒ
```bash
# åŠŸèƒ½åˆ†æ”¯
feature/user-auth
feature/chat-interface

# ä¿®å¤åˆ†æ”¯
fix/login-bug
fix/api-error

# æ–‡æ¡£åˆ†æ”¯
docs/api-update
docs/readme-improvement

# å‘å¸ƒåˆ†æ”¯
release/v1.0```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### åç«¯æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cd backend && pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_chat.py -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ --cov=app --cov-report=html
```

### å‰ç«¯æµ‹è¯•
```bash
# è¿è¡Œæµ‹è¯•
cd frontend && npm test

# è¿è¡Œæ„å»ºæ£€æŸ¥
npm run build
```

---

## ğŸ”’ å®‰å…¨æŒ‡å—

### ä»£ç å®‰å…¨
- é¿å…ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ã€Tokenï¼‰
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†é…ç½®
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…
- è¿è¡Œå®‰å…¨æ‰«æå·¥å…·

### ä¾èµ–å®‰å…¨
```bash
# æ£€æŸ¥ Python ä¾èµ–å®‰å…¨
safety check

# æ£€æŸ¥ Node.js ä¾èµ–å®‰å…¨
npm audit
```

---

## ğŸ“š æ–‡æ¡£è§„èŒƒ

### ä»£ç æ³¨é‡Š
- ä½¿ç”¨æ¸…æ™°çš„å‡½æ•°å’Œç±»æ–‡æ¡£å­—ç¬¦ä¸²
- ä¸ºå¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
- ä½¿ç”¨è‹±æ–‡ç¼–å†™æ³¨é‡Š

### API æ–‡æ¡£
- ä½¿ç”¨ FastAPI è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
- ä¸ºæ¯ä¸ªç«¯ç‚¹æ·»åŠ è¯¦ç»†æè¿°
- æä¾›è¯·æ±‚å’Œå“åº”ç¤ºä¾‹

### é¡¹ç›®æ–‡æ¡£
- ä¿æŒ README.md æ›´æ–°
- ç¼–å†™è¯¦ç»†çš„å®‰è£…å’Œä½¿ç”¨æŒ‡å—
- æä¾›å¸¸è§é—®é¢˜è§£ç­”

---

## ğŸš¨ å¸¸è§é—®é¢˜

### ä»£ç æ ¼å¼åŒ–é—®é¢˜
```bash
# è‡ªåŠ¨æ ¼å¼åŒ– Python ä»£ç 
black backend/

# è‡ªåŠ¨æ’åºå¯¼å…¥
isort backend/
```

### æµ‹è¯•å¤±è´¥
```bash
# æ£€æŸ¥æµ‹è¯•ç¯å¢ƒ
cd backend && python -c "import pytest; print('pytest æ­£å¸¸')"

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
pytest tests/test_specific.py -v
```

### æ„å»ºå¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜
make clean

# é‡æ–°å®‰è£…ä¾èµ–
make install
```

---

## ğŸ¤ ä»£ç å®¡æŸ¥

### PR å®¡æŸ¥æ¸…å•
-  ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- ] ä»£ç è¦†ç›–ç‡è¾¾æ ‡
- ] æ–‡æ¡£å·²æ›´æ–°
- ] æ²¡æœ‰å®‰å…¨æ¼æ´
- ] æ€§èƒ½å½±å“å¯æ¥å—

### å®¡æŸ¥è€…èŒè´£
- æ£€æŸ¥ä»£ç è´¨é‡å’Œè§„èŒƒ
- éªŒè¯åŠŸèƒ½å®ç°æ­£ç¡®æ€§
- ç¡®ä¿æµ‹è¯•è¦†ç›–å……åˆ†
- æ£€æŸ¥å®‰å…¨æ€§å’Œæ€§èƒ½
- æä¾›å»ºè®¾æ€§åé¦ˆ

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£**ï¼šé˜…è¯»é¡¹ç›®æ–‡æ¡£å’Œæœ¬æŒ‡å—2. **æœç´¢ Issues**ï¼šæŸ¥çœ‹æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜
3. **åˆ›å»º Issue**ï¼šæè¿°æ‚¨é‡åˆ°çš„é—®é¢˜
4. **è”ç³»ç»´æŠ¤è€…**ï¼šé€šè¿‡ GitHub æˆ–é‚®ä»¶è”ç³»

### è”ç³»æ–¹å¼
- é¡¹ç›®ç»´æŠ¤è€…ï¼šå¼ å¿ æº (Zhang Zhongyuan)
- é‚®ç®±ï¼šzhangzhongyuan@example.com
- GitHubï¼š[zzyReal666https://github.com/zzyReal666

---

## ğŸ“„ è®¸å¯è¯

é€šè¿‡æäº¤ä»£ç ï¼Œæ‚¨åŒæ„æ‚¨çš„è´¡çŒ®å°†åœ¨ [MIT License](LICENSE) ä¸‹å‘å¸ƒã€‚

---

*æ„Ÿè°¢æ‚¨ä¸º MyChat é¡¹ç›®åšå‡ºè´¡çŒ®ï¼* 